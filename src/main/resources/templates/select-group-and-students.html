<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Управление студентами в группе</title>
    <!-- Подключение Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap @5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div class="container mt-5">

    <h1>Управление студентами в группе</h1>

    <!-- Форма выбора действия и группы -->
    <form th:action="@{/kubstuTest/group/{groupId}/students}" method="post" th:method="${actionMethod}">
        <div class="mb-3">
            <label for="actionSelect" class="form-label">Выберите действие:</label>
            <select id="actionSelect" name="action" class="form-select" onchange="updateAction()">
                <option value="add">Добавить студентов в группу</option>
                <option value="remove">Удалить студентов из группы</option>
            </select>
        </div>

        <div class="mb-3">
            <label for="groupSelect" class="form-label">Выберите группу:</label>
            <select id="groupSelect" name="groupId" class="form-select">
                <option th:each="group : ${groups}" th:value="${group.id}" th:text="${group.name}"></option>
            </select>
        </div>

        <!-- Секция для отображения студентов -->
        <div id="studentSection" class="mb-3">
            <label for="studentList" class="form-label">Выберите студентов:</label>
            <ul id="studentList" class="list-group">
                <!-- Свободные студенты -->
                <li th:each="student : ${freeStudents}" class="list-group-item d-flex justify-content-between align-items-center">
                    <span th:text="${student.name}">Имя студента</span>
                    <input type="checkbox" name="studentIds" th:value="${student.id}" />
                </li>
            </ul>
        </div>

        <!-- Кнопка подтверждения -->
        <button type="submit" class="btn btn-primary">Подтвердить</button>
    </form>

</div>

<!-- Подключение JavaScript для обновления действий -->
<script>
    function updateAction() {
        const actionSelect = document.getElementById('actionSelect');
        const selectedAction = actionSelect.value;

        // Изменение метода HTTP в зависимости от выбранного действия
        const form = document.querySelector('form');
        if (selectedAction === 'add') {
            form.action = '/kubstuTest/group/' + document.getElementById('groupSelect').value + '/add-students';
            form.method = 'POST';
        } else if (selectedAction === 'remove') {
            form.action = '/kubstuTest/group/' + document.getElementById('groupSelect').value + '/remove-students';
            form.method = 'POST';
        }
    }
</script>

<!-- Подключение Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap @5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>